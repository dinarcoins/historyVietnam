<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fullscreen Section Scroll</title>
    <link rel="stylesheet" href="./css/styles.css" />
    <link rel="stylesheet" href="./css/include.main.css" />
    <style></style>
  </head>
  <body>
    <aside class="pf h1v t0 l0 bgc0 w5 z5">
      <ul>
        <li data-index="0" class="active">Section 1</li>
        <li data-index="1">Section 2</li>
        <li data-index="2">Section 3</li>
        <li data-index="3">Section 4</li>
      </ul>
    </aside>

    <header id="menu" class="w95 pf t0 r0 z5 h100 bgct">
      
    </header>

    <section class="section">
      <div class="image-container">
        <img src="./imgs/king.png" alt="Image 1" />
        <img src="./imgs/king.png" alt="Image 2" />
        <img src="./imgs/king.png" alt="Image 3" />
        <img src="./imgs/king.png" alt="Image 4" />
        <img src="./imgs/king.png" alt="Image 5" />
      </div>
    </section>
    <section class="section">Section 2</section>
    <section class="section">Section 3</section>
    <section class="section">Section 4</section>

    <footer>
      <ul>
        <li><a href="#">sasd</a></li>
        <li><a href="#">sdasd</a></li>
        <li><a href="">asd</a></li>
        <li><a href="">asd</a></li>
        <li><a href="">asd</a></li>
        <li><a href="">asd</a></li>
        <li><a href="">asd</a></li>
        <li><a href="">asd</a></li>
      </ul>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let currentSection = 0;
        const sections = document.querySelectorAll(".section");
        const navItems = document.querySelectorAll(".nav li");
        const totalSections = sections.length;
        let isScrolling = false;

        function showSection(index) {
          sections.forEach((section, idx) => {
            if (idx === index) {
              section.classList.add("active");
            } else {
              section.classList.remove("active");
            }
          });

          navItems.forEach((item, idx) => {
            if (idx === index) {
              item.classList.add("active");
            } else {
              item.classList.remove("active");
            }
          });
        }

        function handleScroll(event) {
          if (isScrolling) return;

          if (event.deltaY > 0 && currentSection < totalSections - 1) {
            isScrolling = true;
            currentSection++;
          } else if (event.deltaY < 0 && currentSection > 0) {
            isScrolling = true;
            currentSection--;
          }

          showSection(currentSection);

          setTimeout(() => {
            isScrolling = false;
          }, 600);
        }

        function handleTouch() {
          let startY = 0;

          window.addEventListener("touchstart", function (e) {
            startY = e.touches[0].clientY;
          });

          window.addEventListener("touchend", function (e) {
            const endY = e.changedTouches[0].clientY;
            if (isScrolling) return;

            if (startY > endY + 50 && currentSection < totalSections - 1) {
              isScrolling = true;
              currentSection++;
            } else if (startY < endY - 50 && currentSection > 0) {
              isScrolling = true;
              currentSection--;
            }

            showSection(currentSection);

            setTimeout(() => {
              isScrolling = false;
            }, 5000);
          });
        }

        navItems.forEach((item, index) => {
          item.addEventListener("click", function () {
            currentSection = index;
            showSection(currentSection);
          });
        });

        window.addEventListener("wheel", handleScroll);
        handleTouch();

        showSection(currentSection);
      });
    </script>
  </body>
</html>
